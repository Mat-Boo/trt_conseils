{% extends 'base.html.twig' %}

{% block title %}Consultant - TRT Conseils{% endblock %}

{% block content %}
<h1>Bienvenue sur l'espace Consultant</h1>

<div class="w-100 rounded p-5 bg-light">
    <h4 class="align-self-start mb-3">Offres d'emploi en attente d'approbation</h4>
    {% if nonApprovedJobOffers|length == 0 %}
        <p class="text-center">
            Il n'y a aucune offres d'emploi actuellement.
        </p>
    {% else %}
        <div class="row w-100">
            {% for  jobOffer in nonApprovedJobOffers %}
                <div class="col-md-6 p-1">
                    <div class="card w-100 h-100" style="width: 18rem;">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-title">{{ jobOffer.title }}</h5>
                            <p class="card-text bg-secondary text-white p-2 m-0 rounded">{{ jobOffer.workingHours }} | {{ jobOffer.salary|number_format(2, ',', '.') }} €</p>
                        </div>
                        <div class="card-body d-flex flex-column justify-content-between">
                            <p class="card-text"><b>Lieu : </b>{{ jobOffer.place }}</p>
                            <p class="card-text"><b>Description : </b>{{ jobOffer.description }}</p>
                            <p>Offre proposée par <b>{{ jobOffer.recruiter.company }}</b></p>
                            <hr>
                            <div class="d-flex justify-content-between align-items-center">
                                <a href="{{ path('app_job_offer_apply', {'id' : jobOffer.id}) }}" class="bg-danger rounded p-2 text-white">Refuser</a>
                                <a href="{{ path('app_job_offer_apply', {'id' : jobOffer.id}) }}" class="bg-success rounded p-2 text-white">Approuver</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor  %}
        </div>
    {% endif %}
    <hr class="my-4">
    <h4 class="align-self-start mb-3">Candidats en attente d'approbation</h4>
    {% if nonApprovedCandidates|length == 0 %}
        <p class="text-center">
            Il n'a aucun candidat en attente d'approbation.
        </p>
    {% else %}
        <div class="row w-100">
            {% for  user in nonApprovedCandidates %}
                <div class="col-md-4 p-1">
                    <div class="card w-100 h-100" style="width: 18rem;">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-text">{{ user.firstname }} {{ user.lastname }}</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-title"><b>Email : </b>{{ user.email }}</p>
                            <p><b>Emploi recherché : </b>{{user.job}}</p>
                            <p><a href="../uploads/{{user.cv}}" class="bg-secondary p-2 rounded text-white">Voir le CV</a></p>
                            <hr>
                            <div class="d-flex justify-content-between align-items-center">
                                <a href="{{ path('app_job_offer_apply', {'id' : user.id}) }}" class="bg-danger rounded p-2 text-white">Refuser</a>
                                <a href="{{ path('app_job_offer_apply', {'id' : user.id}) }}" class="bg-success rounded p-2 text-white">Approuver</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor  %}
        </div>
    {% endif %}
    <hr class="my-4">
    <h4 class="align-self-start mb-3">Recruteurs en attente d'approbation</h4>
    {% if nonApprovedRecruiters|length == 0 %}
        <p class="text-center">
            Il n'a aucun recruteur en attente d'approbation.
        </p>
    {% else %}
        <div class="row w-100">
            {% for  user in nonApprovedRecruiters %}
                <div class="col-md-4 p-1">
                    <div class="card w-100 h-100" style="width: 18rem;">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="card-text">{{ user.company }}</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-title"><b>Email : </b>{{ user.email }}</p>
                            <p class="card-text"><b>Adresse : </b>{{ user.address }}</p>
                            <hr>
                            <div class="d-flex justify-content-between align-items-center">
                                <a href="{{ path('app_job_offer_apply', {'id' : user.id}) }}" class="bg-danger rounded p-2 text-white">Refuser</a>
                                <a href="{{ path('app_job_offer_apply', {'id' : user.id}) }}" class="bg-success rounded p-2 text-white">Approuver</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor  %}
        </div>
    {% endif %}
</div>
{% endblock %}